#!/bin/bash

# Directory to store the data
mkdir -p pokemon_data

# List of Pokémon to fetch
pokemon_list=(bulbasaur ivysaur venusaur charmander charmeleon)

# Loop through each Pokémon
for name in "${pokemon_list[@]}"; do
    echo "Fetching data for $name..."

    # Convert name to lowercase (just in case)
    lower_name=$(echo "$name" | tr '[:upper:]' '[:lower:]')

    # API URL
    url="https://pokeapi.co/api/v2/pokemon/$lower_name"

    # Output file
    output_file="pokemon_data/${lower_name}.json"

    # Fetch data using curl
    response=$(curl -s -w "%{http_code}" -o "$output_file" "$url")
    http_code="${response: -3}"

    # Check if request succeeded
    if [ "$http_code" -eq 200 ]; then
        echo "Saved data to $output_file ✅"
    else
        echo "❌ Failed to fetch data for $name (HTTP $http_code)"
        rm -f "$output_file"  # Remove incomplete file if it failed
    fi

    # Wait 1 second between requests to avoid rate-limiting
    sleep 1
done

