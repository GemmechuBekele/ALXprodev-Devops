#!/bin/bash

# Output directory
mkdir -p pokemon_data

# List of Pokémon to fetch
pokemon_list=(bulbasaur ivysaur venusaur charmander charmeleon)

# Function to fetch a single Pokémon
fetch_pokemon() {
    name="$1"
    lower_name=$(echo "$name" | tr '[:upper:]' '[:lower:]')
    url="https://pokeapi.co/api/v2/pokemon/$lower_name"
    output_file="pokemon_data/${lower_name}.json"

    echo "Fetching data for $name..."
    response=$(curl -s -w "%{http_code}" -o "$output_file" "$url")
    http_code="${response: -3}"

    if [ "$http_code" -eq 200 ]; then
        echo "Saved data to $output_file ✅"
    else
        echo "❌ Failed to fetch data for $name (HTTP $http_code)"
        rm -f "$output_file"
    fi
}

# Loop through and run each fetch in background
for pokemon in "${pokemon_list[@]}"; do
    fetch_pokemon "$pokemon" &
done

# Wait for all background jobs to finish
wait

echo "✅ All Pokémon data fetched."

